<!DOCTYPE html>
<html id="loginimg" lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cactus Jack</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="assets/style/style.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

</head>

<body>

  <div class="row">
    <div class="col s1 m4"></div>

    <!-- contact header starts here -->



    <div id="login-sizing" class="col s10 m4 center-align">
      <nav>
        <div id="loginPush" class="nav-wrapper black">
          <div class="brand-logo center black">Login</div>
        </div>
      </nav>


      <form class="loginBackG">
        <p class="center-align">
          <label for="username">username</label>
          <input class="center-align" type="text" name="username" id="username">
        </p>
        <p>
          <label for="password">password</label>
          <input class="center-align" type="password" name="password" id="password">
        </p>
        <p>
          <a id="login" class="waves-effect waves-light btn black"><i class="material-icons left">local_pizza</i>Login
            Player</a>
        </p>
      </form>

      <div class="center-align">
        <a class="white-text" href="/register.html">New User? Register</a>
      </div>
    </div>



    <div class="col s1 m4"></div>


    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>

      document.getElementById('login').addEventListener('click', event => {
        event.preventDefault()
        localStorage.setItem('currentUser', document.getElementById('username').value)
        axios.post('/api/users/login', {
          username: document.getElementById('username').value,
          password: document.getElementById('password').value
        })
          .then(({ data: token }) => {
            if (token) {
              localStorage.setItem('token', token)
              window.location = '/'
            } else {
              alert('Invalid username or password')
            }
          })
          .catch(err => console.error(err))
      })
    </script>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script> -->


</html>